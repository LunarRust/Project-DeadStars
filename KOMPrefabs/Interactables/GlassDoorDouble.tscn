[gd_scene load_steps=22 format=3 uid="uid://c28y566e2vv2h"]

[ext_resource type="Material" uid="uid://su30u7c7tupt" path="res://KOMTextures/glass.tres" id="1_l3e2w"]
[ext_resource type="Script" path="res://CustomScripts/Objects/ItemDoor.gd" id="2_8l7at"]
[ext_resource type="Script" path="res://CustomScripts/Objects/ItemDoorAnimate.gd" id="2_q20mg"]
[ext_resource type="AudioStream" uid="uid://df0gu044r5he3" path="res://KOMSounds/glass-slide-6-83645.mp3" id="3_yjmq8"]

[sub_resource type="ArrayMesh" id="ArrayMesh_qf0mh"]
_surfaces = [{
"aabb": AABB(-4, -1, 3, 1, 2.00001, 1),
"attribute_data": PackedByteArray(126, 87, 4, 52, 1, 0, 192, 191, 254, 255, 127, 191, 2, 0, 192, 191, 255, 255, 127, 191, 3, 0, 128, 191, 179, 239, 138, 49, 1, 0, 128, 191, 255, 255, 191, 191, 0, 0, 128, 180, 255, 255, 255, 191, 0, 0, 192, 180, 0, 0, 0, 192, 250, 255, 127, 63, 1, 0, 192, 191, 252, 255, 127, 63, 254, 255, 191, 191, 2, 0, 128, 191, 253, 255, 191, 191, 2, 0, 192, 191, 253, 255, 255, 191, 2, 0, 192, 191, 254, 255, 255, 191, 3, 0, 128, 191, 2, 0, 192, 63, 252, 255, 127, 191, 1, 0, 0, 64, 250, 255, 127, 191, 1, 0, 0, 64, 253, 255, 191, 191, 3, 0, 192, 63, 254, 255, 191, 191, 1, 0, 192, 63, 0, 0, 144, 52, 255, 255, 191, 63, 2, 0, 128, 63, 255, 255, 255, 63, 3, 0, 128, 63, 0, 0, 0, 64, 0, 0, 192, 52, 126, 87, 4, 52, 254, 255, 191, 191, 246, 93, 17, 51, 254, 255, 127, 191, 0, 0, 128, 63, 250, 255, 127, 191, 1, 0, 128, 63, 253, 255, 191, 191),
"format": 34359742487,
"index_count": 36,
"index_data": PackedByteArray(0, 0, 1, 0, 2, 0, 0, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6, 0, 4, 0, 6, 0, 7, 0, 8, 0, 9, 0, 10, 0, 8, 0, 10, 0, 11, 0, 12, 0, 13, 0, 14, 0, 12, 0, 14, 0, 15, 0, 16, 0, 17, 0, 18, 0, 16, 0, 18, 0, 19, 0, 20, 0, 21, 0, 22, 0, 20, 0, 22, 0, 23, 0),
"material": ExtResource("1_l3e2w"),
"name": "Door01",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 24,
"vertex_data": PackedByteArray(0, 0, 128, 192, 0, 0, 128, 63, 0, 0, 64, 64, 0, 0, 128, 192, 0, 0, 128, 191, 0, 0, 64, 64, 0, 0, 64, 192, 0, 0, 128, 191, 0, 0, 64, 64, 0, 0, 64, 192, 0, 0, 128, 63, 0, 0, 64, 64, 0, 0, 128, 192, 0, 0, 128, 63, 0, 0, 64, 64, 0, 0, 128, 192, 0, 0, 128, 63, 0, 0, 128, 64, 0, 0, 128, 192, 0, 0, 128, 191, 0, 0, 128, 64, 0, 0, 128, 192, 0, 0, 128, 191, 0, 0, 64, 64, 0, 0, 64, 192, 0, 0, 128, 191, 0, 0, 64, 64, 0, 0, 128, 192, 0, 0, 128, 191, 0, 0, 64, 64, 0, 0, 128, 192, 0, 0, 128, 191, 0, 0, 128, 64, 0, 0, 64, 192, 0, 0, 128, 191, 0, 0, 128, 64, 0, 0, 64, 192, 0, 0, 128, 63, 0, 0, 64, 64, 0, 0, 64, 192, 0, 0, 128, 63, 0, 0, 128, 64, 0, 0, 128, 192, 0, 0, 128, 63, 0, 0, 128, 64, 0, 0, 128, 192, 0, 0, 128, 63, 0, 0, 64, 64, 0, 0, 64, 192, 0, 0, 128, 63, 0, 0, 64, 64, 0, 0, 64, 192, 0, 0, 128, 191, 0, 0, 64, 64, 0, 0, 64, 192, 0, 0, 128, 191, 0, 0, 128, 64, 0, 0, 64, 192, 0, 0, 128, 63, 0, 0, 128, 64, 0, 0, 128, 192, 0, 0, 128, 63, 0, 0, 128, 64, 0, 0, 64, 192, 0, 0, 128, 63, 0, 0, 128, 64, 0, 0, 64, 192, 0, 0, 128, 191, 0, 0, 128, 64, 0, 0, 128, 192, 0, 0, 128, 191, 0, 0, 128, 64, 255, 255, 255, 255, 255, 127, 0, 128, 255, 255, 255, 255, 255, 127, 0, 128, 255, 255, 255, 255, 255, 127, 0, 128, 255, 255, 255, 255, 255, 127, 0, 128, 0, 0, 255, 127, 255, 127, 255, 191, 0, 0, 255, 127, 255, 127, 255, 191, 0, 0, 255, 127, 255, 127, 255, 191, 0, 0, 255, 127, 255, 127, 255, 191, 255, 127, 0, 0, 255, 127, 255, 191, 255, 127, 0, 0, 255, 127, 255, 191, 255, 127, 0, 0, 255, 127, 255, 191, 255, 127, 0, 0, 255, 127, 255, 191, 255, 127, 255, 255, 255, 255, 0, 128, 255, 127, 255, 255, 255, 255, 0, 128, 255, 127, 255, 255, 255, 255, 0, 128, 255, 127, 255, 255, 255, 255, 0, 128, 255, 255, 255, 127, 0, 0, 0, 128, 255, 255, 255, 127, 0, 0, 0, 128, 255, 255, 255, 127, 0, 0, 0, 128, 255, 255, 255, 127, 0, 0, 0, 128, 255, 127, 255, 127, 255, 127, 255, 255, 255, 127, 255, 127, 255, 127, 255, 255, 255, 127, 255, 127, 255, 127, 255, 255, 255, 127, 255, 127, 255, 127, 255, 255)
}]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jer35"]
albedo_color = Color(0, 0, 0, 1)
metallic = 0.18

[sub_resource type="BoxMesh" id="BoxMesh_ef8p6"]
material = SubResource("StandardMaterial3D_jer35")

[sub_resource type="BoxShape3D" id="BoxShape3D_ebpv8"]
size = Vector3(0.137085, 2.03503, 1.0498)

[sub_resource type="Animation" id="Animation_tl4nn"]
resource_name = "Open"
length = 1.5
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(),
"points": PackedFloat32Array(),
"times": PackedFloat32Array()
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(),
"points": PackedFloat32Array(),
"times": PackedFloat32Array()
}
tracks/2/type = "bezier"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:position:z")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(-0.498927, -0.25, 0, 0.25, 0, -1.3, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 1.5)
}
tracks/3/type = "bezier"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("../DoorGlassAnimate2:position:x")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"handle_modes": PackedInt32Array(),
"points": PackedFloat32Array(),
"times": PackedFloat32Array()
}
tracks/4/type = "bezier"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("../DoorGlassAnimate2:position:y")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"handle_modes": PackedInt32Array(),
"points": PackedFloat32Array(),
"times": PackedFloat32Array()
}
tracks/5/type = "bezier"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("../DoorGlassAnimate2:position:z")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(0.500176, -0.25, 0, 0.25, 0, 1.3, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 1.5)
}

[sub_resource type="Animation" id="Animation_0wgf4"]
resource_name = "Close"
length = 1.5
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(),
"points": PackedFloat32Array(),
"times": PackedFloat32Array()
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(),
"points": PackedFloat32Array(),
"times": PackedFloat32Array()
}
tracks/2/type = "bezier"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:position:z")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(-1.3, -0.25, 0, 0.25, 0, -0.499, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 1.5)
}
tracks/3/type = "bezier"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("../DoorGlassAnimate2:position:x")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"handle_modes": PackedInt32Array(),
"points": PackedFloat32Array(),
"times": PackedFloat32Array()
}
tracks/4/type = "bezier"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("../DoorGlassAnimate2:position:y")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"handle_modes": PackedInt32Array(),
"points": PackedFloat32Array(),
"times": PackedFloat32Array()
}
tracks/5/type = "bezier"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("../DoorGlassAnimate2:position:z")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"handle_modes": PackedInt32Array(0, 0),
"points": PackedFloat32Array(1.3, -0.25, 0, 0.25, 0, 0.500176, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 1.5)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_kw0vi"]
_data = {
"Close": SubResource("Animation_0wgf4"),
"Open": SubResource("Animation_tl4nn")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3m163"]
animation = &"Close"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jbqvu"]
animation = &"CloseOp"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lb5qv"]
animation = &"Open"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_y28u7"]
animation = &"OpenOp"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sfn6e"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2
advance_condition = &"Close"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ox8t5"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2
advance_condition = &"Open"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_j80ou"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2
advance_condition = &"CloseOp"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_s4hed"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2
advance_condition = &"CloseOp"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_k7c7w"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_bg6ki"]
states/Close/node = SubResource("AnimationNodeAnimation_3m163")
states/Close/position = Vector2(500, 146)
states/CloseOp/node = SubResource("AnimationNodeAnimation_jbqvu")
states/CloseOp/position = Vector2(651, 146)
states/Open/node = SubResource("AnimationNodeAnimation_lb5qv")
states/Open/position = Vector2(500, 58)
states/OpenOp/node = SubResource("AnimationNodeAnimation_y28u7")
states/OpenOp/position = Vector2(651, 58)
transitions = ["Open", "Close", SubResource("AnimationNodeStateMachineTransition_sfn6e"), "Close", "Open", SubResource("AnimationNodeStateMachineTransition_ox8t5"), "OpenOp", "CloseOp", SubResource("AnimationNodeStateMachineTransition_j80ou"), "CloseOp", "OpenOp", SubResource("AnimationNodeStateMachineTransition_s4hed"), "Start", "Close", SubResource("AnimationNodeStateMachineTransition_k7c7w")]

[node name="GlassDoorDouble" type="Node3D"]

[node name="DoorGlassAnimate" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.499)

[node name="entity_0_mesh_instance" type="MeshInstance3D" parent="DoorGlassAnimate"]
transform = Transform3D(0.06, 0, 0, 0, 0.96, 0, 0, 0, 0.96, 0.820222, 0.526979, -3.37097)
mesh = SubResource("ArrayMesh_qf0mh")
skeleton = NodePath("")

[node name="MeshInstance3D" type="MeshInstance3D" parent="DoorGlassAnimate"]
transform = Transform3D(0.088, 0, 0, 0, 1.98, 0, 0, 0, 0.04, 0.612486, 0.526979, 0.479865)
mesh = SubResource("BoxMesh_ef8p6")
skeleton = NodePath("../entity_0_mesh_instance")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="DoorGlassAnimate"]
transform = Transform3D(0.088, 0, 0, 0, 1.98, 0, 0, 0, 0.04, 0.612486, 0.526979, -0.506936)
mesh = SubResource("BoxMesh_ef8p6")
skeleton = NodePath("../entity_0_mesh_instance")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="DoorGlassAnimate"]
transform = Transform3D(0.088, 0, 0, 0, -4.15258e-08, 0.04, 0, -0.95, -1.74846e-09, 0.612486, 1.49682, -0.0124183)
mesh = SubResource("BoxMesh_ef8p6")
skeleton = NodePath("../entity_0_mesh_instance")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="DoorGlassAnimate"]
transform = Transform3D(0.088, 0, 0, 0, -4.15258e-08, 0.04, 0, -0.95, -1.74846e-09, 0.612486, -0.443335, -0.0124183)
mesh = SubResource("BoxMesh_ef8p6")
skeleton = NodePath("../entity_0_mesh_instance")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="DoorGlassAnimate"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="DoorGlassAnimate"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.613776, 0.517517, -0.00927734)
shape = SubResource("BoxShape3D_ebpv8")

[node name="Behavior" type="Node" parent="DoorGlassAnimate" node_paths=PackedStringArray("AnimTree", "AnimPlayer")]
script = ExtResource("2_q20mg")
ItemToMatch = "Nurse KeyCard"
SoundEffect = ExtResource("3_yjmq8")
AnimTree = NodePath("../AnimationTree")
AnimPlayer = NodePath("../AnimationPlayer")
direction = Vector3(0, 0, -1)
Duration = 1.5

[node name="SoundSource" type="AudioStreamPlayer3D" parent="DoorGlassAnimate"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.621663, 0.586973, 0.493761)
volume_db = -25.0
max_distance = 20.0
max_polyphony = 2
script = ExtResource("2_8l7at")

[node name="AnimationPlayer" type="AnimationPlayer" parent="DoorGlassAnimate"]
active = false
libraries = {
"": SubResource("AnimationLibrary_kw0vi")
}

[node name="AnimationTree" type="AnimationTree" parent="DoorGlassAnimate"]
libraries = {
"": SubResource("AnimationLibrary_kw0vi")
}
tree_root = SubResource("AnimationNodeStateMachine_bg6ki")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/Close = true
parameters/conditions/CloseOp = false
parameters/conditions/Open = false

[node name="DoorGlassAnimate2" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.500176)

[node name="entity_0_mesh_instance" type="MeshInstance3D" parent="DoorGlassAnimate2"]
transform = Transform3D(0.06, 0, 0, 0, 0.96, 0, 0, 0, 0.96, 0.820222, 0.526979, -3.37097)
mesh = SubResource("ArrayMesh_qf0mh")
skeleton = NodePath("")

[node name="MeshInstance3D" type="MeshInstance3D" parent="DoorGlassAnimate2"]
transform = Transform3D(0.088, 0, 0, 0, 1.98, 0, 0, 0, 0.04, 0.612486, 0.526979, 0.479865)
mesh = SubResource("BoxMesh_ef8p6")
skeleton = NodePath("../entity_0_mesh_instance")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="DoorGlassAnimate2"]
transform = Transform3D(0.088, 0, 0, 0, 1.98, 0, 0, 0, 0.04, 0.612486, 0.526979, -0.506936)
mesh = SubResource("BoxMesh_ef8p6")
skeleton = NodePath("../entity_0_mesh_instance")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="DoorGlassAnimate2"]
transform = Transform3D(0.088, 0, 0, 0, -4.15258e-08, 0.04, 0, -0.95, -1.74846e-09, 0.612486, 1.49682, -0.0124183)
mesh = SubResource("BoxMesh_ef8p6")
skeleton = NodePath("../entity_0_mesh_instance")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="DoorGlassAnimate2"]
transform = Transform3D(0.088, 0, 0, 0, -4.15258e-08, 0.04, 0, -0.95, -1.74846e-09, 0.612486, -0.443335, -0.0124183)
mesh = SubResource("BoxMesh_ef8p6")
skeleton = NodePath("../entity_0_mesh_instance")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="DoorGlassAnimate2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="DoorGlassAnimate2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.613776, 0.517517, -0.00927734)
shape = SubResource("BoxShape3D_ebpv8")
