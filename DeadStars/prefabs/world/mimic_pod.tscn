[gd_scene load_steps=19 format=3 uid="uid://cfnpfffrxi5lg"]

[ext_resource type="AudioStream" uid="uid://btmkak6fttu2b" path="res://Sounds/DogOpen.ogg" id="1_45d82"]
[ext_resource type="Script" path="res://CustomScripts/Logic/Player/DialogueSystem.gd" id="1_slorn"]
[ext_resource type="Script" path="res://CustomScripts/NPC/HealthController.gd" id="2_vvu1u"]
[ext_resource type="PackedScene" uid="uid://dbrrtfnihdheq" path="res://KOMPrefabs/blood_splatter_KOM.tscn" id="3_6xhvh"]
[ext_resource type="AudioStream" uid="uid://cnq4ok8ggd6bs" path="res://Sounds/Gore02.ogg" id="4_g774m"]
[ext_resource type="Script" path="res://DeadStars/scripts/Behaviors/mimic_pod_behavior.gd" id="5_cwqs1"]
[ext_resource type="PackedScene" uid="uid://c7ltdx2msggbi" path="res://DeadStars/models/Mimic_Pod/Mimic_Pod.glb" id="5_tsrjo"]
[ext_resource type="PackedScene" uid="uid://dm0ks56ht7kq0" path="res://DeadStars/prefabs/system/scene_instantiator.tscn" id="7_v5ogf"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_b53q0"]
radius = 0.476608
height = 1.75373

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_my7b1"]
animation = &"Pod_Die"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_r38fg"]
animation = &"Pod_Idle_Closed"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4keha"]
animation = &"Pod_Idle_Open"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ar28e"]
animation = &"Pod_Open"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_t3dhr"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3n2t2"]
advance_mode = 2
advance_condition = &"open"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_37ufg"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6x1xl"]
advance_mode = 2
advance_condition = &"die"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_ty7u7"]
states/End/position = Vector2(1145, 100)
states/Pod_Die/node = SubResource("AnimationNodeAnimation_my7b1")
states/Pod_Die/position = Vector2(799, 46)
states/Pod_Idle_Closed/node = SubResource("AnimationNodeAnimation_r38fg")
states/Pod_Idle_Closed/position = Vector2(799, 174)
states/Pod_Idle_Open/node = SubResource("AnimationNodeAnimation_4keha")
states/Pod_Idle_Open/position = Vector2(598, 46)
states/Pod_Open/node = SubResource("AnimationNodeAnimation_ar28e")
states/Pod_Open/position = Vector2(603, 174)
states/Start/position = Vector2(442, 100)
transitions = ["Start", "Pod_Idle_Open", SubResource("AnimationNodeStateMachineTransition_t3dhr"), "Pod_Idle_Open", "Pod_Open", SubResource("AnimationNodeStateMachineTransition_3n2t2"), "Pod_Open", "Pod_Idle_Closed", SubResource("AnimationNodeStateMachineTransition_37ufg"), "Pod_Idle_Open", "Pod_Die", SubResource("AnimationNodeStateMachineTransition_6x1xl")]

[node name="MimicPod" type="StaticBody3D"]

[node name="Hurting" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
autoplay = true
max_distance = 5.0

[node name="OpenSound" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("1_45d82")

[node name="DialogueSystem" type="Node3D" parent="." node_paths=PackedStringArray("soundSource")]
script = ExtResource("1_slorn")
npcName = "Pod"
Dialogue = Array[String](["[placeholder]"])
LookDescription = Array[String](["[placeholder]"])
TouchDescription = Array[String](["[placeholder]"])
soundSource = NodePath("../Hurting")
looking = false

[node name="Col" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.858521, 0)
shape = SubResource("CapsuleShape3D_b53q0")

[node name="HealthController" type="Node3D" parent="." node_paths=PackedStringArray("DialogueSystem", "SoundSource")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
script = ExtResource("2_vvu1u")
Innocent = true
HP = 3
removeOnDeath = false
DialogueSystem = NodePath("../DialogueSystem")
SoundSource = NodePath("../Hurting")
gibRoot = ExtResource("3_6xhvh")
HurtSound = ExtResource("4_g774m")

[node name="Behavior" type="Node" parent="." node_paths=PackedStringArray("AnimTree", "DialogueSystem", "instantiator", "SoundPlayer")]
script = ExtResource("5_cwqs1")
AnimTree = NodePath("../AnimationTree")
DialogueSystem = NodePath("../DialogueSystem")
instantiator = NodePath("../SceneInstantiator")
SoundPlayer = NodePath("../OpenSound")
OpenSoundEffect = ExtResource("1_45d82")

[node name="Mimic_Pod" parent="." instance=ExtResource("5_tsrjo")]

[node name="Skeleton3D" parent="Mimic_Pod/Mimic Pod/rig" index="0"]
bones/3/rotation = Quaternion(0.242437, -0.0439538, -0.22083, 0.943677)
bones/3/scale = Vector3(1, 1, 1)
bones/4/rotation = Quaternion(-0.0799782, 0.00737537, 0.113177, 0.990323)
bones/5/rotation = Quaternion(-0.0654566, -0.00279538, 0.0225321, 0.997597)
bones/6/rotation = Quaternion(-0.100137, -0.00708905, 0.0760413, 0.992038)
bones/7/rotation = Quaternion(-0.149422, 0.00937083, 0.206581, 0.966907)
bones/8/rotation = Quaternion(-0.156324, -0.00297548, 0.176326, 0.971835)
bones/9/rotation = Quaternion(-0.0736305, -0.0119235, -0.0561522, 0.995632)
bones/10/rotation = Quaternion(-0.00670528, 0.00058732, -0.145914, 0.989274)
bones/11/rotation = Quaternion(0.0360332, -0.0325011, -0.198699, 0.978859)
bones/12/rotation = Quaternion(-0.184767, 0.0488505, -0.378777, 0.90554)
bones/13/rotation = Quaternion(0.179306, -0.0436945, 0.186201, 0.965023)
bones/14/rotation = Quaternion(-0.0474802, -0.0109873, 0.175118, 0.983341)
bones/15/rotation = Quaternion(0.142448, -0.017514, 0.0701479, 0.987158)
bones/16/rotation = Quaternion(0.187647, 0.141941, 0.218765, 0.946987)
bones/17/rotation = Quaternion(6.00816e-05, 0.00296577, -0.00235179, 0.999993)
bones/18/rotation = Quaternion(-0.0971603, 0.00447963, 0.0604292, 0.993422)
bones/19/rotation = Quaternion(-0.0709975, 0.0675224, -0.00486545, 0.995177)
bones/20/rotation = Quaternion(-0.0780644, 0.128858, -0.0912887, 0.984362)
bones/21/rotation = Quaternion(-0.244387, 0.162624, 0.121993, 0.948128)
bones/21/scale = Vector3(1, 1, 1)
bones/22/rotation = Quaternion(0.0975557, -0.139316, -0.0801908, 0.982163)
bones/23/rotation = Quaternion(0.0571202, -0.0364586, -0.0385012, 0.996958)
bones/24/rotation = Quaternion(0.119106, -0.014306, -0.0678411, 0.990458)
bones/25/rotation = Quaternion(0.253771, 0.212416, -0.0418786, 0.942723)
bones/26/rotation = Quaternion(0.112946, -0.00571077, 0.0264491, 0.993233)
bones/27/rotation = Quaternion(-0.0256208, 0.24694, 0.300053, 0.92105)
bones/27/scale = Vector3(1, 1, 1)
bones/28/rotation = Quaternion(0.0251309, -0.185083, -0.238332, 0.953053)
bones/29/rotation = Quaternion(0.0267571, -0.0661412, 0.040135, 0.996644)
bones/30/rotation = Quaternion(-0.0365238, -0.0357061, -0.141511, 0.988618)
bones/31/rotation = Quaternion(0.0218877, 0.272643, -0.298805, 0.914277)
bones/32/rotation = Quaternion(0.27539, 0.698958, -0.113559, 0.650172)
bones/33/rotation = Quaternion(0.0933696, -0.0442303, 0.14576, 0.983911)
bones/34/rotation = Quaternion(0.0691821, 0.112693, 0.0941197, 0.98674)
bones/35/rotation = Quaternion(0.0263503, 0.250267, 0.246113, 0.936002)
bones/36/rotation = Quaternion(0.246117, -0.0539768, 0.0545038, 0.9662)
bones/36/scale = Vector3(1, 1, 1)
bones/37/rotation = Quaternion(-0.154903, 0.0195904, -0.0170909, 0.987588)
bones/38/rotation = Quaternion(0.0946866, -0.00955271, 0.0176384, 0.995305)
bones/39/rotation = Quaternion(-0.226438, 0.0172179, -0.0402378, 0.973042)
bones/40/rotation = Quaternion(-0.354279, 0.0246912, -0.13001, 0.925729)
bones/41/rotation = Quaternion(-0.154339, -0.162612, -0.0122495, 0.974467)
bones/42/rotation = Quaternion(-0.241129, 0.0158857, 0.0100634, 0.970311)
bones/43/rotation = Quaternion(-0.414299, 0.0774995, 0.0510294, 0.905398)
bones/52/rotation = Quaternion(0.232115, 0.612874, 0.696568, -0.292064)

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Mimic_Pod")
tree_root = SubResource("AnimationNodeStateMachine_ty7u7")
anim_player = NodePath("../Mimic_Pod/AnimationPlayer")
parameters/conditions/die = false
parameters/conditions/open = false

[node name="SceneInstantiator" parent="." instance=ExtResource("7_v5ogf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0146652, 0.975407, 0.0322757)
AutoSpawn = false

[connection signal="death" from="HealthController" to="Behavior" method="Die"]

[editable path="Mimic_Pod"]
